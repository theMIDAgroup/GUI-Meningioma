%% Slider_Image_brain()% LISCOMP Lab 2021 - 2022, https://liscomp.dima.unige.it% -------------------------------------------------------------------------% DESCRIPTION:% This function changes the slice in the figure plot.% If a roi is present, this function draws it using Draw_Roi()% -------------------------------------------------------------------------%%%% called by: main_gui_brain() - panel 'MR Figure'%%%%            Enable_MouseControl()%%%% call:  Show_Image()%%%%        Draw_Roi()function Slider_Image_brain()global gui_ROI;global ROI;Show_Image;val = gui_ROI.PopupValue;if val    if ~ROI{val}.RoiEmpty        [~,aux_position] = ismember(gui_ROI.SliceNumber,ROI{val}.RoiSlice);        if aux_position            RoiPosition = ROI{val}.RoiPosition{aux_position};            RoiKind = ROI{val}.RoiKind{aux_position};            Draw_Roi(RoiKind,RoiPosition,aux_position);        else            if gui_ROI.SliceNumber> ROI{val}.RoiSlice(end) && ~ROI{val}.RoiEnd                aux_position0 = size(ROI{val}.RoiSlice,1);                ROI{val}.RoiSlice = [ROI{val}.RoiSlice ; ...                    (ROI{val}.RoiSlice(end)+1:1:gui_ROI.SliceNumber).'];                aux_position = size(ROI{val}.RoiSlice,1);                RoiKind = ROI{val}.RoiKind{end};                RoiPosition = ROI{val}.RoiPosition{end};                Draw_Roi(RoiKind,RoiPosition,aux_position);                for it = aux_position0:aux_position                    ROI{val}.RoiKind{it} = RoiKind;                    ROI{val}.RoiPosition{it} = RoiPosition;                    ROI{val}.RoiRegion(it,:) = ROI{val}.RoiRegion(aux_position0,:);                end            end        end    else        [~,aux_position] = ismember(gui_ROI.SliceNumber,ROI{val}.RoiSlice);        if aux_position            RoiPosition = ROI{val}.RoiPosition{aux_position};            RoiKind = ROI{val}.RoiKind{aux_position};            Draw_RoiSpherical(RoiKind,RoiPosition);        end    endendend